---
AIGC:
    ContentProducer: Minimax Agent AI
    ContentPropagator: Minimax Agent AI
    Label: AIGC
    ProduceID: "00000000000000000000000000000000"
    PropagateID: "00000000000000000000000000000000"
    ReservedCode1: 3046022100de5028194c8b8294906640cad854cbb73055d748e41b3762bc9d856179be111d022100dc86fe0ab81aeab4d6d7e63d9607bc5fcf3c51135bd69f9a76fe6f58911c8196
    ReservedCode2: 304502202e783493c08e6b67a97196998b0d8c858b1db5107e539f33aa2b57c578d687f4022100b86d825032cd5c9fb69a8b44760eee0034451d54726c1d41a041429112d835e0
---

# ğŸš€ GitHub Actions å®Œæ•´éƒ¨ç½²æ–¹æ¡ˆ

## ğŸ“‹ æ¦‚è¿°

å³åˆ»AIåŠ©æ‰‹é¡¹ç›®å·²é…ç½®å®Œæ•´çš„GitHub Actionsè‡ªåŠ¨åŒ–éƒ¨ç½²ç³»ç»Ÿï¼Œæ”¯æŒï¼š
- âœ… **è‡ªåŠ¨æ„å»º**: æ¨é€ä»£ç è‡ªåŠ¨æ„å»ºAPK
- âœ… **å¤šæ¶æ„æ”¯æŒ**: arm64-v8aã€armeabi-v7a
- âœ… **ä»£ç è´¨é‡æ£€æŸ¥**: é™æ€åˆ†æã€æµ‹è¯•è¦†ç›–ç‡
- âœ… **è‡ªåŠ¨å‘å¸ƒ**: æ„å»ºæˆåŠŸè‡ªåŠ¨åˆ›å»ºRelease
- âœ… **å®‰å…¨ç­¾å**: APKæ•°å­—ç­¾å

## ğŸ—‚ï¸ æ–‡ä»¶ç»“æ„

```
workspace/
â”œâ”€â”€ .github/workflows/          # GitHub Actionsé…ç½®
â”‚   â”œâ”€â”€ build-apk.yml          # ä¸»è¦æ„å»ºæµç¨‹
â”‚   â”œâ”€â”€ compatibility-test.yml  # å…¼å®¹æ€§æµ‹è¯•
â”‚   â”œâ”€â”€ security-scan.yml       # å®‰å…¨æ‰«æ
â”‚   â”œâ”€â”€ dependency-update.yml   # ä¾èµ–æ›´æ–°æ£€æŸ¥
â”‚   â””â”€â”€ performance-test.yml    # æ€§èƒ½æµ‹è¯•
â”œâ”€â”€ GitHub_Actionséƒ¨ç½²æŒ‡å—.md     # è¯¦ç»†éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ GitHub_Actionså¿«é€Ÿéƒ¨ç½².md     # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ deploy-to-github.sh         # Linux/Macéƒ¨ç½²è„šæœ¬
â””â”€â”€ deploy-to-github.bat        # Windowséƒ¨ç½²è„šæœ¬
```

## âš¡ å¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨è„šæœ¬

#### Linux/Macç”¨æˆ·
```bash
# 1. ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy-to-github.sh

# 2. è¿è¡Œéƒ¨ç½²è„šæœ¬
./deploy-to-github.sh
```

#### Windowsç”¨æˆ·
```cmd
# 1. åŒå‡»è¿è¡Œ
deploy-to-github.bat

# 2. æˆ–åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ
deploy-to-github.bat
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

#### ç¬¬1æ­¥ï¼šåˆ›å»ºGitHubä»“åº“
1. è®¿é—® [GitHub.com](https://github.com)
2. åˆ›å»ºæ–°ä»“åº“ï¼š`jike-ai-agent`

#### ç¬¬2æ­¥ï¼šé…ç½®GitHub Secrets

åœ¨ä»“åº“çš„ **Settings** â†’ **Secrets and variables** â†’ **Actions** ä¸­æ·»åŠ ï¼š

| å¯†é’¥å | è¯´æ˜ | è·å–æ–¹æ³• |
|-------|------|----------|
| `SIGNING_KEY` | APKç­¾åå¯†é’¥ | `base64 -i jike-release-key.keystore` |
| `STORE_PASSWORD` | å¯†é’¥åº“å¯†ç  | ç”Ÿæˆå¯†é’¥æ—¶è®¾ç½®çš„å¯†ç  |
| `KEY_ALIAS` | å¯†é’¥åˆ«å | `jike-key-alias` |
| `KEY_PASSWORD` | å¯†é’¥å¯†ç  | ç”Ÿæˆå¯†é’¥æ—¶è®¾ç½®çš„å¯†ç  |

#### ç¬¬3æ­¥ï¼šæ¨é€ä»£ç 
```bash
git init
git add .
git commit -m "å³åˆ»AIåŠ©æ‰‹ - åˆå§‹æäº¤"
git branch -M main
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/jike-ai-agent.git
git push -u origin main
```

## ğŸ”§ è¯¦ç»†é…ç½®è¯´æ˜

### æ„å»ºæµç¨‹

```mermaid
graph TD
    A[ä»£ç æ¨é€] --> B[ä»£ç è´¨é‡æ£€æŸ¥]
    B --> C[è¿è¡Œæµ‹è¯•]
    C --> D[æ„å»ºAPK]
    D --> E[æ„å»ºAAB]
    E --> F[åˆ›å»ºRelease]
    F --> G[ä¸‹è½½APK]
```

### è§¦å‘æ¡ä»¶

| äº‹ä»¶ | åˆ†æ”¯ | åŠ¨ä½œ |
|------|------|------|
| `git push` | `main` | æ„å»ºReleaseç‰ˆæœ¬ + åˆ›å»ºRelease |
| `git push` | `develop` | æ„å»ºDebugç‰ˆæœ¬ + Firebaseåˆ†å‘ |
| `Pull Request` | `main` | ä»…æµ‹è¯•æ„å»º |
| `æ‰‹åŠ¨è§¦å‘` | ä»»æ„ | å¯é€‰æ‹©æ„å»ºç±»å‹ |

### æ„å»ºäº§ç‰©

| æ–‡ä»¶ç±»å‹ | æ¶æ„ | æ–‡ä»¶å | è¯´æ˜ |
|---------|------|-------|------|
| APK | arm64-v8a | `app-arm64-release.apk` | 64ä½Androidè®¾å¤‡ |
| APK | armeabi-v7a | `app-armeabi-release.apk` | 32ä½Androidè®¾å¤‡ |
| AAB | é€šç”¨ | `app-release.aab` | Google Playå‘å¸ƒ |

## ğŸ“Š å·¥ä½œæµè¯¦è§£

### build-apk.yml ä¸»è¦é˜¶æ®µ

1. **ğŸ” ä»£ç è´¨é‡æ£€æŸ¥**
   - `flutter analyze` é™æ€ä»£ç åˆ†æ
   - æµ‹è¯•è¦†ç›–ç‡ç»Ÿè®¡
   - ä»£ç è§„èŒƒæ£€æŸ¥

2. **ğŸ§ª è¿è¡Œæµ‹è¯•**
   - å•å…ƒæµ‹è¯•ï¼š`flutter test`
   - é›†æˆæµ‹è¯•ï¼š`flutter test integration_test`

3. **ğŸ“± æ„å»ºAPK**
   - å¤šæ¶æ„å¹¶è¡Œæ„å»º
   - è‡ªåŠ¨APKç­¾å
   - äº§ç‰©ä¸Šä¼ 

4. **ğŸ‰ åˆ›å»ºRelease**
   - è‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬å·
   - åˆ›å»ºGitHub Release
   - é™„ä¸Šæ„å»ºäº§ç‰©

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç­¾åå¤±è´¥
**é”™è¯¯ä¿¡æ¯**: `Signing key not found`
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥`SIGNING_KEY`æ˜¯å¦æ­£ç¡®è®¾ç½®ä¸ºbase64æ ¼å¼

#### 2. ä¾èµ–ä¸‹è½½å¤±è´¥  
**é”™è¯¯ä¿¡æ¯**: `pub get failed with 1 error`
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥`pubspec.yaml`ä¾èµ–ç‰ˆæœ¬å…¼å®¹æ€§

#### 3. æ„å»ºè¶…æ—¶
**é”™è¯¯ä¿¡æ¯**: `The operation was canceled`
**è§£å†³æ–¹æ¡ˆ**: ä¼˜åŒ–æ„å»ºè„šæœ¬æˆ–å¢åŠ è¶…æ—¶æ—¶é—´

### è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**
   - è¿›å…¥Actionsé¡µé¢ â†’ ç‚¹å‡»å…·ä½“workflow â†’ æŸ¥çœ‹æ­¥éª¤æ—¥å¿—

2. **æ‰‹åŠ¨è§¦å‘æ„å»º**
   - Actionsé¡µé¢ â†’ "Run workflow" â†’ é€‰æ‹©è°ƒè¯•æ¨¡å¼

3. **ç¼“å­˜ä¾èµ–**
   ```yaml
   - uses: actions/cache@v3
     with:
       path: ~/.pub-cache
       key: ${{ runner.os }}-pub-${{ hashFiles('**/pubspec.lock') }}
   ```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### åŠ é€Ÿæ„å»º

1. **å¯ç”¨ä¾èµ–ç¼“å­˜**
2. **å¹¶è¡Œæ„å»ºæ¶æ„**
3. **å¢é‡æ„å»º**
4. **ä¼˜åŒ–Flutterç‰ˆæœ¬**

### å‡å°‘å­˜å‚¨ç©ºé—´

```yaml
# æ¸…ç†æ„å»ºæ–‡ä»¶
- name: Cleanup
  run: |
    rm -rf jike_ai_agent/.dart_tool
    rm -rf jike_ai_agent/build
```

## ğŸ” å®‰å…¨æœ€ä½³å®è·µ

### å¯†é’¥ç®¡ç†
- âœ… ä½¿ç”¨GitHub Secretså­˜å‚¨æ•æ„Ÿä¿¡æ¯
- âœ… å®šæœŸè½®æ¢ç­¾åå¯†é’¥
- âœ… é™åˆ¶Secretsè®¿é—®æƒé™

### ä»£ç å®‰å…¨
- âœ… å¯ç”¨ä¾èµ–æ¼æ´æ‰«æ
- âœ… å®šæœŸæ›´æ–°ä¾èµ–ç‰ˆæœ¬
- âœ… å®¡æŸ¥ç¬¬ä¸‰æ–¹ä¾èµ–

## ğŸ“‹ æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰ç¡®è®¤ï¼š

- [ ] GitHubä»“åº“å·²åˆ›å»º
- [ ] æ‰€æœ‰Secretså·²æ­£ç¡®é…ç½®
- [ ] é¡¹ç›®æ–‡ä»¶ç»“æ„å®Œæ•´
- [ ] GitHub Actionsæƒé™æ­£ç¡®
- [ ] ç­¾åå¯†é’¥å·²ç”Ÿæˆ
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡

## ğŸ¯ ä¸‹ä¸€æ­¥ä¼˜åŒ–

1. **ç›‘æ§å‘Šè­¦**: è®¾ç½®æ„å»ºå¤±è´¥é€šçŸ¥
2. **æ€§èƒ½ç›‘æ§**: é›†æˆæ„å»ºæ—¶é—´ç»Ÿè®¡
3. **å®‰å…¨æ‰«æ**: æ·»åŠ è‡ªåŠ¨åŒ–å®‰å…¨æ£€æŸ¥
4. **å¤šç¯å¢ƒ**: é…ç½®stagingã€production
5. **ç”¨æˆ·åé¦ˆ**: é›†æˆæµ‹è¯•åˆ†å‘ç³»ç»Ÿ

## ğŸ”— ç›¸å…³é“¾æ¥

- **GitHub Actionsæ–‡æ¡£**: https://docs.github.com/en/actions
- **Flutteræ„å»º**: https://docs.flutter.dev/deployment/android
- **Androidç­¾å**: https://developer.android.com/studio/publish/app-signing
- **é¡¹ç›®ä»“åº“**: [ä½ çš„GitHubä»“åº“åœ°å€]

---

## ğŸ‰ æ€»ç»“

å³åˆ»AIåŠ©æ‰‹é¡¹ç›®å·²é…ç½®å®Œæ•´çš„GitHub Actionsè‡ªåŠ¨åŒ–éƒ¨ç½²ç³»ç»Ÿï¼Œå®ç°ï¼š

- ğŸš€ **ä¸€é”®éƒ¨ç½²**: æ¨é€ä»£ç è‡ªåŠ¨æ„å»ºAPK
- ğŸ“± **å¤šæ¶æ„æ”¯æŒ**: è¦†ç›–ä¸»æµAndroidè®¾å¤‡
- ğŸ”„ **æŒç»­é›†æˆ**: æ¯æ¬¡ä»£ç å˜æ›´è‡ªåŠ¨æµ‹è¯•
- ğŸ¯ **è‡ªåŠ¨å‘å¸ƒ**: æ„å»ºæˆåŠŸè‡ªåŠ¨åˆ›å»ºRelease
- ğŸ›¡ï¸ **å®‰å…¨å¯é **: ä»£ç è´¨é‡æ£€æŸ¥ + å®‰å…¨æ‰«æ

**ç«‹å³å¼€å§‹éƒ¨ç½²æ‚¨çš„AIåŠ©æ‰‹åº”ç”¨å§ï¼** ğŸš€
